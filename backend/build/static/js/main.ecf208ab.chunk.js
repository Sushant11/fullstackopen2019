(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{17:function(e,t,a){},36:function(e,t,a){e.exports=a(63)},63:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(13),l=a.n(o),c=(a(17),a(7)),u=a.n(c),s=a(8),m=a(68),i=a(65),d=function(e){return r.a.createElement(m.a,{onSubmit:e.addPerson,className:"mt-1 mb-3"},r.a.createElement(m.a.Group,{controlId:"name"},r.a.createElement(m.a.Control,{type:"text",placeholder:"Name",value:e.newName,onChange:e.handleNameChange})),r.a.createElement(m.a.Group,{controlId:"number"},r.a.createElement(m.a.Control,{type:"number",placeholder:"Contact Details",value:e.newNumber,onChange:e.handleNumberChange})),r.a.createElement(i.a,{variant:"info",type:"submit"},"Add"))},p=function(e){return r.a.createElement(m.a,{onSubmit:e.handleLogin},r.a.createElement(m.a.Group,{controlId:"username"},r.a.createElement(m.a.Control,{type:"text",placeholder:"Username",value:e.username,name:"Username",onChange:function(t){var a=t.target;return e.setUsername(a.value)}})),r.a.createElement(m.a.Group,{controlId:"password"},r.a.createElement(m.a.Control,{type:"password",placeholder:"Password",value:e.password,name:"Password",onChange:function(t){var a=t.target;return e.setPassword(a.value)}})),r.a.createElement(i.a,{variant:"info",type:"submit"},"Login"))},h=a(66),f=function(e){var t=e.person,a=(e.persons,e.handleDelete);return r.a.createElement(h.a,{striped:!0,bordered:!0,hover:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Number"),r.a.createElement("th",null,"Action"))),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,t.name),r.a.createElement("td",null,t.number),r.a.createElement("td",null,r.a.createElement(i.a,{variant:"danger",onClick:a},"Delete")))))},g=a(10),b=a.n(g),E="/api/persons",v=null,w=function(){return b.a.get(E)},N=function(e){var t,a;return u.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t={headers:{Authorization:v}},n.next=3,u.a.awrap(b.a.post(E,e,t));case 3:return a=n.sent,n.abrupt("return",a.data);case 5:case"end":return n.stop()}}))},y=function(e){return b.a.delete("".concat(E,"/").concat(e))},O=function(e){v="bearer ".concat(e)},j=function(e){var t;return u.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,u.a.awrap(b.a.post("/api/login",e));case 2:return t=a.sent,a.abrupt("return",t.data);case 4:case"end":return a.stop()}}))},C=a(69),k=function(e){var t=e.message;return null===t?null:r.a.createElement(C.a,{className:"error",variant:"info"},t)},x=a(70),S=a(31),P=a(67),D=function(e){var t=Object(n.useState)([]),a=Object(s.a)(t,2),o=a[0],l=a[1],c=Object(n.useState)(""),m=Object(s.a)(c,2),h=m[0],g=m[1],b=Object(n.useState)(""),E=Object(s.a)(b,2),v=E[0],D=E[1],I=Object(n.useState)(null),L=Object(s.a)(I,2),U=L[0],A=L[1],G=Object(n.useState)(""),J=Object(s.a)(G,2),z=J[0],B=J[1],F=Object(n.useState)(""),T=Object(s.a)(F,2),W=T[0],q=T[1],H=Object(n.useState)(null),K=Object(s.a)(H,2),M=K[0],Q=K[1];Object(n.useEffect)((function(){w().then((function(e){return l(e.data)}))}),[]),Object(n.useEffect)((function(){var e=window.localStorage.getItem("loggedPhonebookUser");if(e){var t=JSON.parse(e);Q(t),O(t.token)}}),[]);return r.a.createElement("div",null,r.a.createElement(k,{message:U}),null===M?r.a.createElement(n.Fragment,null,r.a.createElement(x.a,{style:{padding:"30px",width:"20rem",margin:"auto"},className:"resp-login"},r.a.createElement(S.a,{md:"auto",className:"mx-auto"}," ",r.a.createElement("h4",null,"Login"),r.a.createElement(p,{username:z,password:W,setUsername:B,setPassword:q,handleLogin:function(e){var t;return u.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return e.preventDefault(),a.prev=1,a.next=4,u.a.awrap(j({username:z,password:W}));case 4:t=a.sent,window.localStorage.setItem("loggedPhonebookUser",JSON.stringify(t)),O(t.token),Q(t),B(""),q(""),a.next=16;break;case 12:a.prev=12,a.t0=a.catch(1),A("Wrong credentials"),setTimeout((function(){A(null)}),5e3);case 16:case"end":return a.stop()}}),null,null,[[1,12]])}})))):r.a.createElement(P.a,null,r.a.createElement(x.a,{style:{width:"45%",padding:"20px",margin:"auto"},className:"resp-main"},r.a.createElement("h3",null,"Phonebook"),r.a.createElement(d,{addPerson:function(e){e.preventDefault();var t={name:h,number:v};o.find((function(e){return e.name===h}))?(alert("".concat(h," already added in the List.")),g("")):N(t).then((function(e){l(o.concat(e)),g(""),D(""),A("New Person Added!")}))},newName:h,newNumber:v,handleNumberChange:function(e){D(e.target.value)},handleNameChange:function(e){g(e.target.value)}}),r.a.createElement("h4",null,"Numbers"),0===o.length?r.a.createElement(C.a,{variant:"warning"},"No Data"):o.map((function(e){return r.a.createElement(f,{key:e.id,person:e,persons:o,handleDelete:function(){return t=e.id,void(!0===window.confirm("Delete ".concat(t,"?"))&&y(t).then((function(e){return alert("".concat(t," Deleted"),document.location.reload()),e.data})));var t}})}))),r.a.createElement("div",{className:"mt-3",style:{textAlign:"center"}},M.name," Logged In."," ",r.a.createElement(i.a,{variant:"secondary",onClick:function(){window.localStorage.removeItem("loggedPhonebookUser"),window.location.reload()}},"Logout"))))};l.a.render(r.a.createElement(D,null),document.getElementById("root"))}},[[36,1,2]]]);
//# sourceMappingURL=main.ecf208ab.chunk.js.map