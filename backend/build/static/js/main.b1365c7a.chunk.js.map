{"version":3,"sources":["components/PersonForm.js","components/Login.js","components/Persons.js","services/persons.js","services/login.js","components/Notification.js","components/App.js","index.js"],"names":["PersonForm","props","onSubmit","addPerson","value","newName","onChange","handleNameChange","newNumber","handleNumberChange","type","Login","handleLogin","username","name","target","setUsername","password","setPassword","Persons","person","handleDelete","number","onClick","baseUrl","token","axios","get","newObject","a","async","config","headers","Authorization","post","response","data","id","delete","newToken","credentials","Notification","message","className","App","useState","persons","setPersons","setNewName","setNewNubmer","errorMessage","setErrorMessage","user","setUser","useEffect","personService","then","event","preventDefault","loginService","setTimeout","e","personObject","length","find","item","alert","concat","map","key","window","confirm","document","location","reload","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.b1365c7a.chunk.js","sourcesContent":["import React from \"react\";\r\n\r\nconst PersonForm = props => {\r\n  return (\r\n    <form onSubmit={props.addPerson}>\r\n      <table>\r\n        <tbody>\r\n        <tr>\r\n          <td>Name:</td>\r\n          <td>\r\n            <input value={props.newName} onChange={props.handleNameChange} />\r\n          </td>\r\n        </tr>\r\n        <tr>\r\n          <td>Phone No:</td>\r\n          <td>\r\n            <input\r\n              value={props.newNumber}\r\n              onChange={props.handleNumberChange}\r\n            />\r\n          </td>\r\n        </tr>\r\n        <tr>\r\n          <td>\r\n            <button type=\"submit\">Add</button>\r\n          </td>\r\n        </tr>\r\n        </tbody>\r\n      </table>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default PersonForm;\r\n","import React from \"react\";\r\n\r\nconst Login =  props => {\r\n  return (\r\n    <form onSubmit={props.handleLogin}>\r\n      <table>\r\n        <tbody>\r\n          <tr>\r\n            <td>Username</td>\r\n            <td>\r\n              {\" \"}\r\n              <input\r\n                type=\"text\"\r\n                value={props.username}\r\n                name=\"Username\"\r\n                onChange={({ target }) => props.setUsername(target.value)}\r\n              />\r\n            </td>\r\n          </tr>\r\n          <tr>\r\n            <td>Password</td>\r\n            <td>\r\n              <input\r\n                type=\"password\"\r\n                value={props.password}\r\n                name=\"Password\"\r\n                onChange={({ target }) => props.setPassword(target.value)}\r\n              />\r\n            </td>\r\n          </tr>\r\n          <tr>\r\n            <td>\r\n              <button type=\"submit\">login</button>\r\n            </td>\r\n          </tr>\r\n        </tbody>\r\n      </table>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n","import React from \"react\";\r\n\r\nconst Persons = ({ person, handleDelete }) => {\r\n  return (\r\n    <div>\r\n      <li>\r\n        {person.name} : {person.number}{\" \"}\r\n        <button onClick={handleDelete}>Delete</button>\r\n      </li>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Persons;\r\n","import axios from \"axios\";\r\nconst baseUrl = \"/api/persons\";\r\n\r\nlet token = null\r\n\r\nconst setToken = newToken => {\r\n  token = `bearer ${newToken}`\r\n}\r\n\r\n\r\nconst getAll = () => {\r\n  return axios.get(baseUrl);\r\n};\r\n\r\nconst create = async newObject => {\r\n  const config = {\r\n    headers: { Authorization: token },\r\n  }\r\n\r\n  const response = await axios.post(baseUrl, newObject, config)\r\n  return response.data\r\n}\r\n\r\nconst update = (id, newObject) => {\r\n  return axios.put(`${baseUrl}/${id}`, newObject);\r\n};\r\n\r\nconst deleted = id => {\r\n  return axios.delete(`${baseUrl}/${id}`);\r\n};\r\n\r\nexport default { getAll, create, update, deleted, setToken };\r\n","import axios from 'axios'\r\nconst baseUrl = '/api/login'\r\n\r\nconst login = async credentials => {\r\n  const response = await axios.post(baseUrl, credentials)\r\n  return response.data\r\n}\r\n\r\nexport default { login }","import React from 'react';\r\nimport '../index.css'\r\n\r\nconst Notification = ({ message }) => {\r\n    if (message === null) {\r\n      return null\r\n    }\r\n  \r\n    return (\r\n      <div className=\"error\">\r\n        {message}\r\n      </div>\r\n    )\r\n  }\r\n\r\nexport default Notification;","import React, { useState, useEffect, Fragment } from \"react\";\r\nimport PersonForm from \"./PersonForm\";\r\nimport Login from \"./Login\";\r\nimport Persons from \"./Persons\";\r\nimport personService from \"../services/persons\";\r\nimport loginService from \"../services/login\";\r\nimport Notification from \"./Notification\";\r\n\r\nconst App = props => {\r\n  const [persons, setPersons] = useState([]);\r\n  const [newName, setNewName] = useState(\"\");\r\n  const [newNumber, setNewNubmer] = useState(\"\");\r\n  const [errorMessage, setErrorMessage] = useState(null);\r\n  const [username, setUsername] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [user, setUser] = useState(null);\r\n\r\n  useEffect(() => {\r\n    personService.getAll().then(response => setPersons(response.data));\r\n  }, []);\r\n\r\n  const addPerson = e => {\r\n    e.preventDefault();\r\n\r\n    const personObject = {\r\n      id: persons.length + 1,\r\n      name: newName,\r\n      number: newNumber\r\n    };\r\n    if (persons.find(item => item.name === newName)) {\r\n      alert(`${newName} already added in the List.`);\r\n      setNewName(\"\");\r\n    } else {\r\n      personService.create(personObject).then(response => {\r\n        setPersons(persons.concat(response.data));\r\n        setNewName(\"\");\r\n        setNewNubmer(\"\");\r\n        setErrorMessage(\"Added\");\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleNameChange = e => {\r\n    setNewName(e.target.value);\r\n  };\r\n  const handleNumberChange = e => {\r\n    setNewNubmer(e.target.value);\r\n  };\r\n\r\n  const handleDelete = id => {\r\n    var r = window.confirm(`Delete ${id}?`);\r\n    if (r === true) {\r\n      personService.deleted(id).then(response => {\r\n        alert(`${id} Deleted`, document.location.reload());\r\n        return response.data;\r\n      });\r\n    } else {\r\n    }\r\n  };\r\n\r\n  const handleLogin = async event => {\r\n    event.preventDefault();\r\n    try {\r\n      const user = await loginService.login({\r\n        username,\r\n        password\r\n      });\r\n\r\n      personService.setToken(user.token)\r\n      setUser(user);\r\n      setUsername(\"\");\r\n      setPassword(\"\");\r\n    } catch (exception) {\r\n      setErrorMessage(\"Wrong credentials\");\r\n      setTimeout(() => {\r\n        setErrorMessage(null);\r\n      }, 5000);\r\n    }\r\n  };\r\n\r\n  const rows = () =>\r\n    persons.map(person => (\r\n      <Persons\r\n        key={person.id}\r\n        person={person}\r\n        handleDelete={() => handleDelete(person.id)}\r\n      />\r\n    ));\r\n\r\n  return (\r\n    <div>\r\n      <Notification message={errorMessage} />\r\n     \r\n\r\n      {user === null ?\r\n      <Fragment> <h4>Login</h4> \r\n      <Login \r\n      username={username}\r\n      password={password}\r\n      setUsername={setUsername}\r\n      setPassword={setPassword}\r\n      handleLogin={handleLogin}\r\n      /> </Fragment>\r\n     :\r\n     <Fragment>\r\n     <h2>Phonebook</h2>\r\n     <p>{user.name} logged in</p>\r\n     <PersonForm\r\n       addPerson={addPerson}\r\n       newName={newName}\r\n       newNumber={newNumber}\r\n       handleNumberChange={handleNumberChange}\r\n       handleNameChange={handleNameChange}\r\n     />\r\n     <h2>Numbers</h2>\r\n     {rows()}\r\n     </Fragment>\r\n    }\r\n   \r\n     \r\n    </div>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./components/App\";\n\nReactDOM.render(<App />, document.getElementById('root'))\n"],"sourceRoot":""}